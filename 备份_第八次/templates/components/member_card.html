<!-- templates/components/member_card.html -->
<div class="member-card management-card">
    <div class="member-avatar">
        <i class="fas fa-user-circle"></i>
    </div>
    <div class="member-content">
        <div class="member-header">
            <h3>{{ member.name }}</h3>
            <div class="member-badges">
                <span class="role-badge role-{{ member.role }}">
                    {% if member.role == 'admin' %}Admin
                    {% elif member.role == 'moderator' %}Moderator
                    {% else %}Member{% endif %}
                </span>
                <span class="status-badge status-{{ member.status }}">
                    {% if member.status == 'active' %}Active
                    {% elif member.status == 'inactive' %}Inactive
                    {% else %}Pending{% endif %}
                </span>
            </div>
        </div>
        <div class="member-details">
            {% if member.email %}
            <div class="member-detail">
                <i class="fas fa-envelope"></i>
                <span>{{ member.email }}</span>
            </div>
            {% endif %}
            {% if member.phone %}
            <div class="member-detail">
                <i class="fas fa-phone"></i>
                <span>{{ member.phone }}</span>
            </div>
            {% endif %}
            {% if member.join_date %}
            <div class="member-detail">
                <i class="fas fa-calendar"></i>
                <span>Join Date: {{ member.join_date }}</span>
            </div>
            {% endif %}
        </div>
        {% if member.notes %}
        <div class="member-notes">
            <p>{{ member.notes }}</p>
        </div>
        {% endif %}
    </div>
    <div class="member-actions">
        <a href="{{ url_for('community.edit_member', member_id=member.id) }}" class="btn btn-secondary btn-sm" title="Edit Member">
            <i class="fas fa-edit"></i>
        </a>

        <!-- Group Management Dropdown -->
        <div class="dropdown">
            <button class="btn btn-info btn-sm dropdown-toggle" type="button" data-bs-toggle="dropdown" title="Change Group">
                <i class="fas fa-layer-group"></i>
            </button>
            <div class="dropdown-menu">
                <h6 class="dropdown-header">Move to Group</h6>
                {% for group in groups %}
                <form action="{{ url_for('community.assign_member_to_group', member_id=member.id) }}" method="post" class="d-inline w-100">
                    <input type="hidden" name="group_id" value="{{ group.id }}">
                    <button type="submit" class="dropdown-item">
                        {{ group.name }}
                    </button>
                </form>
                {% endfor %}
                <!-- 移除有问题的移除组功能 -->
            </div>
        </div>

        <form action="{{ url_for('community.delete_member', member_id=member.id) }}"
              method="post"
              class="delete-form d-inline"
              onsubmit="return confirm('Are you sure you want to delete this member?')">
            <button type="submit" class="btn btn-danger btn-sm" title="Delete Member">
                <i class="fas fa-trash"></i>
            </button>
        </form>
    </div>
</div>